/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.0-rc-1/samples
 */
apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'application'



sourceCompatibility = 1.8
targetCompatibility = 1.8

mainClassName = 'hello.HelloWorld'
//output file name
def distFilename = 'HelloWorld' // or use project.name 
def distVersion = '0.1'  //version
def fullVersion = true //include all the libs in a distribution jar

// tag::repositories[]
repositories { 
    mavenCentral() 
   //jcenter()
}
// end::repositories[]


configurations {
    // configuration that holds jars to include in the jar
    extraLibs
}

// tag::jar[]
jar {
    archiveBaseName = distFilename
    archiveVersion =  distVersion

    if (fullVersion) {
        from {
            configurations.extraLibs.collect { it.isDirectory() ? it : zipTree(it) }
        }
    }

    manifest {
        attributes 'Main-Class': mainClassName
    }
}
// end::jar[]

//download the runtime lib from depository

task getDeps(type: Copy) {
    from sourceSets.main.runtimeClasspath
    into 'runtime/'

    doFirst {
        ant.delete(dir: 'runtime')
        ant.mkdir(dir: 'runtime')
    }

    doLast {
      //ant.delete(dir: 'runtime')
    }
}



// tag::dependencies[]
dependencies {
    //implementation "joda-time:joda-time:2.2"

    // TODO:
    //change all the implementation to extraLibs
    extraLibs  'joda-time:joda-time:2.2'  

    testImplementation "junit:junit:4.12"

    configurations.implementation.extendsFrom(configurations.extraLibs)
}
// end::dependencies[]



// tag::wrapper[]
// end::wrapper[]